<div class="container my-5">
  <h1 class="mb-4">投稿詳細情報 (#<%= @post.id %>)</h1>
  <hr>
  
  <%= render 'shared/error_messages', object: @post %>
  
  <div class="card shadow p-4 mb-4">
    <h3 class="card-title mb-3">基本情報</h3>
    <table class="table table-bordered">
      <tbody>
        <tr>
          <th style="width: 20%;">投稿タイトル</th>
          <td><%= @post.title %></td>
        </tr>
        <tr>
          <th>投稿者</th>
          <td><%= link_to (@post.user.name rescue '削除済みユーザー'), admin_user_path(@post.user) rescue '#' %></td>
        </tr>
        <tr>
          <th>投稿日時</th>
          <td><%= @post.created_at.strftime("%Y/%m/%d %H:%M") %></td>
        </tr>
        <tr>
          <th>本文</th>
          <td><%= simple_format(@post.body) %></td>
        </tr>
        <%# 画像表示 (ActiveStorageを仮定) %>
        <% if @post.post_image.attached? %>
          <tr>
            <th>画像</th>
            <td><%= image_tag @post.post_image, style: "max-width: 300px; height: auto;" %></td>
          </tr>
        <% end %>
        <tr>
          <th>公開ステータス</th>
          <td>
            <% if @post.is_published %>
              <span class="badge badge-success">公開中</span>
            <% else %>
              <span class="badge badge-danger">非公開</span>
            <% end %>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="d-flex justify-content-center mt-4">
      <%# 公開ステータス切り替えボタン %>
      <%= button_to (@post.is_published ? "投稿を非公開にする" : "投稿を公開にする"), 
                    admin_post_path(@post), 
                    method: :patch, 
                    data: { confirm: @post.is_published ? "本当にこの投稿を非公開にしますか？" : "この投稿を公開に戻しますか？" },
                    class: @post.is_published ? "btn btn-danger" : "btn btn-success" %>
    </div>
  </div>
  
  <div class="d-flex justify-content-center mt-5">
    <%= link_to "投稿一覧に戻る", admin_posts_path, class: "btn btn-outline-secondary" %>
  </div>
</div>