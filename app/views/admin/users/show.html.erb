<div class="container my-5">
  <h1 class="mb-4">会員詳細情報 (#<%= @user.id %>)</h1>
  <hr>

  <%= render 'shared/error_messages', object: @user %>
  
  <div class="card shadow p-4 mb-4">
    <h3 class="card-title mb-3">基本情報</h3>
    <table class="table table-bordered">
      <tbody>
        <tr>
          <th style="width: 20%;">ユーザー名</th>
          <td><%= @user.name %></td>
        </tr>
        <tr>
          <th>メールアドレス</th>
          <td><%= @user.email %></td>
        </tr>
        <tr>
          <th>会員ステータス</th>
          <td>
            <% if @user.is_active %>
              <span class="badge badge-success">有効 (利用中)</span>
            <% else %>
              <span class="badge badge-danger">停止中 (退会済)</span>
            <% end %>
          </td>
        </tr>
        <tr>
          <th>最終更新日時</th>
          <td><%= @user.updated_at.strftime("%Y/%m/%d %H:%M") %></td>
        </tr>
        <tr>
          <th>自己紹介文</th>
          <td><%= @user.introduction.presence || "なし" %></td>
        </tr>
      </tbody>
    </table>

    <div class="d-flex justify-content-center mt-4">
      <%# ステータス切り替えボタン %>
      <% unless @user == current_user %> <%# 管理者自身のステータスは変更させないためのガード %>
        <%= button_to (@user.is_active ? "会員ステータスを停止する" : "会員ステータスを有効にする"), 
                      admin_user_path(@user), 
                      method: :patch, 
                      data: { confirm: @user.is_active ? "本当にこの会員を停止しますか？" : "この会員を有効に戻しますか？" },
                      class: @user.is_active ? "btn btn-danger" : "btn btn-success" %>
      <% end %>
    </div>
  </div>

  <div class="d-flex justify-content-center mt-5">
    <%= link_to "会員一覧に戻る", admin_users_path, class: "btn btn-outline-secondary" %>
  </div>
</div>