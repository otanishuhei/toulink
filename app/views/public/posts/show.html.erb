<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
      <div class="mb-4 pb-3 border-bottom">
        <h1 class="mb-2"><%= @post.title %></h1>
        <p class="text-muted small mb-0">
          投稿者: <strong><%= @post.user&.name || "退会済みユーザー" %></strong> | 投稿日: <%= l(@post.created_at, format: :long) %>
        </p>
      </div>

      <% if @post.post_image.attached? %>
        <div class="mb-4">
          <%= image_tag @post.post_image.variant(resize_to_limit: [800, 600]), class: "img-fluid rounded shadow-sm" %>
        </div>
      <% end %>

      <div class="mb-5">
        <p class="lead"><%= @post.body %></p>
      </div>

      <div class="d-flex justify-content-between align-items-center">
        <div>
          <% if @post.user == current_user %>
            <%= link_to "編集", edit_post_path(@post), class: "btn btn-warning mr-2" %>
            <%= link_to "削除", withdraw_post_path(@post),
                method: :patch,
                data: { confirm: "本当に削除しますか？" },
                class: "btn btn-danger" %>
          <% end %>
        </div>

        <%= link_to "投稿一覧に戻る", posts_path, class: "btn btn-secondary" %>
      </div>
    </div>
  </div>
</div>